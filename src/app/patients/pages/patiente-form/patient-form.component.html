<h1>
  {{ currentPatients.id ? "Editar" : "Agregar" }} Heroe
  <small *ngIf="currentPatients.id">{{ currentPatients.firstName }} {{ currentPatients.lastName }}</small>
</h1>

<mat-divider></mat-divider>

<div class="grid">
  <!-- Columna 1: espacio vacío -->
  <div class="col-12 sm:col-1"></div>

  <!-- Columna 2: Imagen y botón para cargar foto -->
  <div class="col-12 sm:col-3">
    <div class="image-container">
      <img *ngIf="currentPatients.profilePicture" [src]="getImageUrl(currentPatients.profilePicture)" alt="Foto del paciente" mat-card-image />
      <input type="file" (change)="onFileChange($event)" />
    </div>
  </div>

  <!-- Columna 3: Formulario -->
  <div class="col-12 sm:col-6">
    <form class="form-grid" [formGroup]="patientForm" (ngSubmit)="onSubmit()">
      <div class="form-columns">
        <!-- Columna Interna 1: Nombre, Género, Nacionalidad y Teléfono -->
        <div class="form-column">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="firstName" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Género</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="male">Masculino</mat-option>
              <mat-option value="female">Femenino</mat-option>
              <mat-option value="other">Otro</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nacionalidad</mat-label>
            <input matInput formControlName="nationality" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="phoneNumber" />
          </mat-form-field>
        </div>

        <!-- Columna Interna 2: Apellido, Fecha de Nacimiento, Dirección y Email -->
        <div class="form-column">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Apellido</mat-label>
            <input matInput formControlName="lastName" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Fecha de Nacimiento</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="birthDate" />
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="address" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" />
          </mat-form-field>
        </div>
      </div>

      <!-- Campo de Información Médica (ocupa el largo de las dos columnas internas) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Información Médica</mat-label>
        <textarea matInput formControlName="medicalInfo"></textarea>
      </mat-form-field>

      <!-- Botón Guardar y alineación -->
      <div class="form-actions">
        <button mat-flat-button color="primary" type="submit">
          <mat-icon>save</mat-icon>
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
